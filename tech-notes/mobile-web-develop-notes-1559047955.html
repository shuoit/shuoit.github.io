<!DOCTYPE HTML><html class="no-js" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=https://shuoit.net/warn.html"><![endif]--><meta charset="utf-8"><meta http-equiv="X-DNS-Prefetch-Control" content="on"><link rel="dns-prefetch" href="https://shuoit.net"><link rel="dns-prefetch" href="//www.google-analytics.com"><link rel="prefetch" href="https://shuoit.net"><link rel="prefetch" href="//www.google-analytics.com"><link rel="prerender" href="https://shuoit.net"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta http-equiv="mobile-agent" content="format=html5; url=https://shuoit.net"><meta name="author" content="托码思(https://www.tangkunyin.com)"><link rel="stylesheet" href="/css/JSimple.css"><link rel="shortcut icon" href="/images/favicon.png"><title>移动端web适配手记 - 说IT</title><meta name="keywords" content="rem,vh,vw"><meta name="description " content="移动端下的网页适配笔记。适用于从Native转向H5开发的新手，涉及em、rem、vh、vw百分比这些单位及less插件的应用。"><script type="text/x-mathjax-config">MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                processEscapes: true
            }
        });</script><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-4837253996935841",enable_page_level_ads:!0})</script><script async src="//www.googletagmanager.com/gtag/js?id=UA-131527701-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-131527701-1")</script></head><body><div id="nav"><nav class="nav-menu"><a class="site-name current" href="/" title="说">说</a><a class="site-index current" href="/"><i class="fa fa-home"></i> <span>首页</span></a><a href="/archives" title="归档"><i class="fa fa-archives"></i> <span>归档</span></a><a href="/tags" title="标签"><i class="fa fa-tags"></i> <span>标签</span></a><a href="/help" title="帮助"><i class="fa fa-question-circle"></i> <span>帮助</span></a></nav></div><div class="nav-user"><a class="btn-search" href="#"><i class="fa fa-search"></i></a><a class="btn-read-mode" href="#"><i class="fa fa-sun-o"></i></a><a class="btn-sns-qr" href="javascript:"><i class="fa fa-telegram"></i></a></div><div id="wrapper" class="clearfix"><div id="body"><div class="main" id="main"><div id="cover"><div class="cover-img"></div><div class="cover-info"><h1 class="cover-siteName">说IT</h1><h3 class="cover-siteTitle">用代码摇滚这个世界</h3><p class="cover-siteDesc">一个关注技术与人文的IT博客</p><div class="cover-sns">&nbsp;&nbsp;<div class="btn btn-telegram"><a href="http://t.me/kunyintang" target="_blank" title="telegram" ref="friend"><i class="fa fa-telegram"></i></a></div>&nbsp;&nbsp;<div class="btn btn-instagram"><a href="https://www.instagram.com/mtangsir/" target="_blank" title="instagram" ref="friend"><i class="fa fa-instagram"></i></a></div>&nbsp;&nbsp;<div class="btn btn-twitter"><a href="https://twitter.com/tangkunyin" target="_blank" title="twitter" ref="friend"><i class="fa fa-twitter"></i></a></div>&nbsp;&nbsp;<div class="btn btn-github"><a href="https://github.com/tangkunyin" target="_blank" title="github" ref="friend"><i class="fa fa-github"></i></a></div></div></div></div><div class="page-title"><ul><li><a href="/">最近</a></li><li class="active"><a href="/categories/tech-notes" data-name="技术">技术</a></li><li><a href="/categories/humanities" data-name="人文">人文</a></li><li><a href="/categories/others" data-name="其他">其他</a></li><li class="page-search"><form id="search" class="search-form"><input type="text" readonly id="local-search-input-tip" placeholder="读物检索~"> <button type="button" disabled class="search-form-submit"><i class="fa fa-search"></i></button></form></li></ul></div><div class="main-inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><div class="post-header"><div class="post-author clearfix"><a class="avatar fleft" href="https://www.tangkunyin.com" target="_blank"><img width="48" src="/images/favicon.png" alt="avatar"></a><p><span class="label">作者</span> <a href="https://about.tangkunyin.com" target="_blank">托码思</a> <span title="最后编辑于&nbsp;2019-05-28">2019-05-28</span></p><p>一个写代码的「伪文人」</p></div><h2 class="post-title">移动端Web适配手记</h2><div class="post-meta">本文共计3273个字 | 您是第&nbsp;<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span>位看到它们的小伙伴</div></div><div class="post-content markdown-body"><h3 id="写在开头"><a href="#写在开头" class="headerlink" title="写在开头"></a>写在开头</h3><p>这篇文章所谈到的内容非常基础，如果你已经是一个前端老司机了，请直接掉头加足油门离去。</p><h3 id="科普"><a href="#科普" class="headerlink" title="科普"></a>科普</h3><p><img src="/img/2019/15591193255276.jpg" alt=""></p><h5 id="REM"><a href="#REM" class="headerlink" title="REM"></a>REM</h5><p>CSS3新增的一个相对单位，来自2013年。全称：<code>font size of root element</code>。可根据网页根元素来设置网页中其他字体大小。</p><p>其中根元素指<strong>html</strong>标签，即：在<code>html标签里设置font-size属性，以此来作为其他rem值的基准，从而取得自适配平衡</code>。另外除了用来设置字体大小，rem还可用来设置视图的：width，height，margin，padding…</p><h5 id="EM"><a href="#EM" class="headerlink" title="EM"></a>EM</h5><p>作用与REM类似，但早于REM，算是他的前辈。全称：<code>font size of element</code>。相对于当前对象内文本的字体尺寸。如当前对行内文本的字体尺寸未被人为设置，则相对于浏览器的默认字体尺寸。其特点如下：</p><ul><li>em值并不是固定的；</li><li>em会继承父级元素的字体大小；</li></ul><p>使用rem为元素设定字体大小时，仍然是相对大小，但相对的是HTML根元素。而em是相对于父级元素；</p><h3 id="与PX的转换"><a href="#与PX的转换" class="headerlink" title="与PX的转换"></a>与PX的转换</h3><blockquote><p>px像素（Pixel），相对长度单位。是相对于显示器分辨率而言。</p></blockquote><p>目前对于大部分浏览器，如果不修改相关字体配置，都是默认显示<strong>font-size:16px</strong>，于是和rem的映射关系有：<code>16px = 1rem</code>。</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果想给一个p标签设置12px的字体大小，那么用rem表示就是</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    font-size: 0.75rem; // 12/16=0.75(rem)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>单位转换的工具：<a href="http://pxtoem.com/">pxtoem</a></p><h3 id="移动端的适配"><a href="#移动端的适配" class="headerlink" title="移动端的适配"></a>移动端的适配</h3><h4 id="media-queries"><a href="#media-queries" class="headerlink" title="media queries"></a>media queries</h4><p>最早，我刚接触响应式那会儿，是通过<strong>css3的media queries</strong>来获取当前设备屏幕尺寸，然后对应写几套css。但这玩意的副作用就是代码量很大，维护不方便（为了兼顾大屏幕或高清设备，会造成其他设备资源浪费，特别是加载图片。毕竟加载流量和时间也是要成本的）。代表作：<strong>Bootstrap</strong></p><h4 id="flex或百分比（-）"><a href="#flex或百分比（-）" class="headerlink" title="flex或百分比（%）"></a>flex或百分比（%）</h4><p>号称弹性布局的就是。查得资料所言，大部分套路皆为：flex+百分比的布局方式。另外，不需要适配的地方仍然是px单位。</p><p>其中，百分比是相对于父元素，正常情况下是通过属性定义自身或其他元素</p><h4 id="rem（本文主角）"><a href="#rem（本文主角）" class="headerlink" title="rem（本文主角）"></a>rem（本文主角）</h4><blockquote><p>这个特性目前主流浏览器都支持，可以放心用。适配步骤：</p></blockquote><h5 id="1-viewport设置"><a href="#1-viewport设置" class="headerlink" title="1. viewport设置"></a>1. viewport设置</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中width=device-width用于设置viewport的宽度等于屏幕的宽度，initial-scale=1.0, maximum-scale=1.0的作用同width=device-width一样</p><p>之所以还要同时设置这两者，是因为当它们单独使用时，表现不够完美，即单独使用时，浏览器会有兼容性问题。另外当两者值不同时，浏览器取最大者。</p><h5 id="2-动态设置元素的font-size值。一般有俩姿势："><a href="#2-动态设置元素的font-size值。一般有俩姿势：" class="headerlink" title="2. 动态设置元素的font-size值。一般有俩姿势："></a>2. 动态设置<html>元素的font-size值。一般有俩姿势：</html></h5><ul><li>利用css的<strong>media query</strong>来设置，好处是都是在样式表里，好管理；</li><li>利用<strong>javascript动态操作dom属性来计算基准值</strong>；</li></ul><p>样式设置</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">media</span> (min-device-width : <span class="number">375px</span>) and (max-device-width : <span class="number">667px</span>) and (-webkit-min-device-pixel-ratio : <span class="number">2</span>)&#123;</span><br><span class="line">    <span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>: <span class="number">37.5px</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>脚本设置</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'html'</span>)[<span class="number">0</span>].style.fontSize = <span class="built_in">window</span>.innerWidth / <span class="number">10</span> + <span class="string">'px'</span>;</span><br></pre></td></tr></table></figure><blockquote><p>这里除以10，是为了控制数字不至于太大，便于后边计算，是随便定义的。即定义屏宽为：10rem，10rem * font-size = 设计宽度</p></blockquote><h5 id="3-编写统一的计量单位值"><a href="#3-编写统一的计量单位值" class="headerlink" title="3. 编写统一的计量单位值"></a>3. 编写统一的计量单位值</h5><p>在编写CSS元素时，width/height，margin，padding等时，使用<strong>rem</strong>作为单位。换算方式如上文提到的那样。可以参考以下公式：</p><p><strong>具体属性值</strong> = <strong>设计稿上的标注</strong> / <strong>设计稿的宽度</strong></p><p>当然如果你是使用诸如Less这样的动态样式表语言的话，可以参考下边说的操作。这样就计算出设计稿上的元素和设计稿的比例了。</p><h3 id="在Less中的应用"><a href="#在Less中的应用" class="headerlink" title="在Less中的应用"></a>在Less中的应用</h3><p>为了统一尺寸计算，可以造一个新的单位，比如：wem</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 基础尺寸换算。(eg in less: wem(1px))</span></span><br><span class="line"><span class="comment">     * @param less</span></span><br><span class="line"><span class="comment">     * @param pluginManager</span></span><br><span class="line"><span class="comment">     * @param functions</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    install(less, pluginManager, functions) &#123;</span><br><span class="line">        functions.add(<span class="string">'wem'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data, base</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> bem = base ? base.value : <span class="number">36</span>;</span><br><span class="line">            <span class="keyword">return</span> less.dimension(data.value / bem, <span class="string">'rem'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在公共的less文件中，可以引用以上插件：</p><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@plugin</span> <span class="string">"less-plugin"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 外部的使用方式，直接用设计稿尺寸</span></span><br><span class="line"><span class="variable">@contentWidth:</span> wem(<span class="number">360</span>);</span><br><span class="line"><span class="variable">@padding:</span> wem(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>此时的360为设计稿的宽度，less插件中的默认36是以设计稿360px为准的，如果你是640px，换成64即可</p><h3 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h3><h4 id="DPR"><a href="#DPR" class="headerlink" title="DPR"></a>DPR</h4><p>设备像素比（device pixel radio），设备像素比（dpr） = 设备像素（分辨率）/设备独立像素（屏幕尺寸）。用人话说，就是常说的2倍图、3倍图中的那个数字倍数</p><p>一般情况下，我们设置<code>initial-scale=1.0</code>就可以了，但是对于dpr大于1的，我们还需要精细化一波操作，可以用<strong>window.devicePixelRatio</strong>获取当前设备的dpr，然后动态设置<code>viewport</code></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> drp = <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">meta.setAttribute(<span class="string">'content'</span>, <span class="string">'initial-scale='</span> + <span class="number">1</span>/dpr + <span class="string">', maximum-scale='</span> + <span class="number">1</span>/dpr + <span class="string">', minimum-scale='</span> + <span class="number">1</span>/dpr + <span class="string">', user-scalable=no'</span>);</span><br></pre></td></tr></table></figure><p>如此，配合rem，就可以完全按设计稿标注来了，也不用再除以2、除以3。好处是：</p><ul><li>解决了图片高清的问题；</li><li>解决了border 1px的问题。比如设置了viewport的scale为0.5，在2倍屏下，1px的border就被缩放成0.5px，更为细腻；</li></ul><h4 id="VW-VH-VM"><a href="#VW-VH-VM" class="headerlink" title="VW  VH VM"></a>VW VH VM</h4><p>视口单位（Viewport units），之前写Vue时偶然发现的。是相对于视窗的宽高度，值为100。VM（VMin），即：取决于哪个更小</p><p>对于移动端而言，最重要的是如何多终端兼容。以上介绍的响应式也好、REM也好都各有千秋，而REM使得CSS和JS耦合在了一起。<strong>VW</strong>和<strong>VH</strong>的诞生解决了这一难题，目前来看，是最趋于完美的做法。具体做法参考以下资料：</p><h3 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h3><ul><li><a href="http://www.alloyteam.com/2016/03/mobile-web-adaptation-tool-rem/">移动web适配利器-rem</a></li><li><a href="https://juejin.im/post/5cbdee71f265da03b57b5866">掘金：移动端/web端适配方案</a></li><li><a href="https://www.zhangxinxu.com/wordpress/2012/09/new-viewport-relative-units-vw-vh-vm-vmin/">视区相关单位vw, vh..简介以及可实际应用场景</a></li><li><a href="https://juejin.im/entry/59b00e46f265da2491513bcc">vh,vw单位你知道多少？</a></li><li><a href="https://aotu.io/notes/2017/04/28/2017-4-28-CSS-viewport-units/">利用视口单位实现适配布局</a></li></ul><h4 id="在线DEMO"><a href="#在线DEMO" class="headerlink" title="在线DEMO"></a>在线DEMO</h4><ul><li><a href="https://jhs.m.taobao.com/m/index.htm#!all">REM布局 - 淘宝聚划算</a></li><li><a href="https://jdc.jd.com/demo/ting/vw_layout.html">视口单位布局</a></li></ul><div class="adsense_post_left"><ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-4837253996935841" data-ad-slot="1712444257"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="adsense_post_right"><ins class="adsbygoogle" style="display:inline-block;width:160px;height:600px" data-ad-client="ca-pub-4837253996935841" data-ad-slot="6857083436"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><p class="adsense_tb_horizontal"><ins class="adsbygoogle" style="display:block;text-align:center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4837253996935841" data-ad-slot="9087656062"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></p></div><div class="post-tool"><a class="btn-thumbs-up" href="javascript:void(0);" data-cid="52" title="95"><i class="fa fa-thumbs-up" aria-hidden="true"></i> 打赏</a></div><div class="post-tags">标签： <a href="/tags/front-end/">前端</a> <a href="/tags/web/">webx</a></div></article><p style="text-align:center">本文代表个人观点，内容仅供参考。若有不恰当之处，望不吝赐教！</p></div><script src="/js/busuanzi.pure.mini.js"></script></div></div><footer class="footer"><div class="footer-inner" style="text-align:center"><p><a href="/about" title="关于">关于</a>&nbsp;&nbsp<em>·</em>&nbsp;&nbsp <a href="/help" title="帮助">帮助</a>&nbsp;&nbsp<em>·</em>&nbsp;&nbsp <a href="/links" title="友链">友链</a>&nbsp;&nbsp<em>·</em>&nbsp;&nbsp <a href="/sitemap.xml" title="地图">地图</a></p><p>本站已建立&nbsp<a href="/timeline" id="siteBuildingTime"></a>&nbsp天，<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="licence">采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议创作</a><br>©2017-<span id="cpYear"></span> 基于&nbsp<a href="http://hexo.io" target="_blank" rel="nofollow">Hexo</a> ，主题采用&nbsp&nbsp<a href="https://github.com/tangkunyin/hexo-theme-jsimple" target="_blank" rel="bookmark">JSimple</a> ，作者&nbsp<a href="https://www.tangkunyin.com" target="_blank" rel="friend">托码思</a> ，Hosted by <a href="https://pages.github.com/" target="_blank" rel="nofollow">GitHub Pages</a></p></div></footer><script src="/js/SimpleCore.js"></script></div><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input id="local-search-input" spellcheck="false" type="text" autocomplete="off" placeholder="请输入查询关键词"></div></div><div id="local-search-result"></div></div><div class="fixed-btn"><a class="btn-gotop" href="javascript:"><i class="fa fa-angle-up"></i></a></div><script>$(function(){var e={buildingTime:"01/20/2018",current:0<$(".post-tags").length?"post":"archive",snsQRCode:"/images/sns-qrcode.png",donateImg:"/images/donate-qr.png",localSearch:{dbPath:""},readMode:"day",localSearch:{dbPath:"/search.json",trigger:"auto",topN:"1",unescape:"false"}};SimpleCore.init(e);var t=document.createElement("script"),a=window.location.protocol.split(":")[0];t.src="https"===a?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)})</script></body></html>